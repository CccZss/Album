webpackJsonp([1],{"/mlJ":function(t,e){},"1P60":function(t,e){},"2Qik":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n("5XB1");var a=n("7+uW"),s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var o=n("VU/8")({name:"App"},s,!1,function(t){n("qOae")},null,null).exports,i=n("/ocq"),r=n("Dd8w"),l=n.n(r),c=n("EcfS"),u=n("hs4R"),d=n.n(u),f="";f="";var m=window.location.origin+f,h=d.a.create({baseURL:f}),p={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tip",on:{mouseenter:t.handleShowPopper,mouseleave:t.handleClosePopper,input:t.handleShowPopper}},[n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.tipShow,expression:"tipShow"}],staticClass:"content"},[n("Icon",{attrs:{type:"arrow-left-b",color:"rgba(255, 255, 255, 0.75)"}}),n("span",[t._v(t._s(this.tipInfo))])],1)]),t._v(" "),t._t("default")],2)},staticRenderFns:[]};var v=n("VU/8")({props:["content","info"],data:function(){return{tipShow:!1}},computed:{tipInfo:function(){return""===this.info?this.content:this.info}},methods:{handleShowPopper:function(){this.tipShow=!0},handleClosePopper:function(){""!==this.info?this.tipShow=!0:this.tipShow=!1}}},p,!1,function(t){n("mttZ")},"data-v-75a4c960",null).exports,g={data:function(){return{email:"",password:"",loadStatu:!1,emailInfo:"",passwordInfo:"",barcodeInfo:"",storage:window.localStorage}},components:{Mytip:v},computed:l()({},Object(c.c)({user:function(t){return t.user}})),methods:l()({},Object(c.b)({login:"user/login"}),{toLogin:function(){var t=this;this.check()&&(this.loadStatu=!0,this.login({email:this.email,password:this.password}).then(function(e){e.state?(t.storage.setItem("email",t.email),t.onSuccess(e.info)):t.onError(e.info)}).catch(function(e){t.onError(e)}))},onSuccess:function(t){this.$router.push({name:"homepage"})},onError:function(t){this.loadStatu=!1,this.$Message.error(t)},toRegister:function(){this.$router.push({name:"register"})},check:function(){return""!=this.email.trim()&&""!=this.password.trim()||(this.$Message.error("请填写好所有的信息"),!1)},forgetPasswork:function(){""!=this.email.trim()||this.$Message.error("请填写好邮箱")}}),watch:{email:function(t){""===t?this.emailInfo="请输入邮箱":/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/.test(t)?this.emailInfo="":this.emailInfo="邮箱格式不对"}},mounted:function(){void 0!==this.storage.email&&(this.email=this.storage.email)}},b={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("center",[n("div",{staticClass:"form",on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.toLogin(e):null}}},[n("Mytip",{attrs:{content:"邮箱",info:t.emailInfo}},[n("Input",{staticClass:"input",attrs:{type:"text",placeholder:"邮箱",icon:"ios-email-outline"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),t._v(" "),n("Mytip",{attrs:{content:"密码",info:t.passwordInfo}},[n("Input",{staticClass:"input",attrs:{type:"password",placeholder:"密码",icon:"ios-locked-outline"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t._v(" "),n("Button",{staticClass:"login-bt",attrs:{type:"primary",long:"",loading:t.loadStatu},on:{click:t.toLogin}},[t._v("登陆")]),t._v(" "),n("a",{staticClass:"forget-psw",attrs:{href:"#"},on:{click:t.forgetPasswork}},[t._v("忘记密码")]),t._v(" "),n("a",{staticClass:"register",attrs:{href:"#"},on:{click:t.toRegister}},[t._v("前往注册")])],1)])},staticRenderFns:[]};var w=n("VU/8")(g,b,!1,function(t){n("mkpF")},"data-v-74773ccc",null).exports,I={data:function(){return{userName:"",email:"",password:"",rePassword:"",loadStatu:!1,nameInfo:"",emailInfo:"",passwordInfo:"",rePasswordInfo:""}},components:{Mytip:v},computed:l()({},Object(c.c)({user:function(t){return t.user}})),methods:l()({},Object(c.b)({register:"user/register"}),{toRegister:function(){var t=this;this.check()&&(this.loadStatu=!0,this.register({userName:this.userName,email:this.email,password:this.password}).then(function(e){e.state?(t.onSuccess(e.info),t.toLogin()):t.onError(e.info)}).catch(function(e){t.onError(e)}))},onSuccess:function(t){this.$Message.success(t)},onError:function(t){this.loadStatu=!1,this.$Message.error(t)},toLogin:function(){this.$router.push({name:"login"})},check:function(){return""!=this.userName.trim()&&""!=this.email.trim()&&""!=this.password.trim()&&this.password.trim()===this.rePassword.trim()||(this.$Message.error("请填写好所有的信息"),!1)}}),watch:{userName:function(t){""===t.trim()?this.nameInfo="请输入用户名":this.nameInfo=""},email:function(t){""===t?this.emailInfo="请输入邮箱":/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/.test(t)?this.emailInfo="":this.emailInfo="邮箱格式不对"},password:function(t){""===t&&(this.passwordInfo="请输入密码")},rePassword:function(t){""===t?this.rePasswordInfo="请确定密码":this.rePassword!==this.password?this.rePasswordInfo="确认密码不匹配":this.rePasswordInfo=""}}},_={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("center",[n("div",{staticClass:"form",on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.toRegister(e):null}}},[n("Mytip",{attrs:{content:"用户名",info:t.nameInfo}},[n("Input",{staticClass:"input",attrs:{type:"text",placeholder:"用户名",icon:"ios-person-outline"},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}})],1),t._v(" "),n("Mytip",{attrs:{content:"邮箱",info:t.emailInfo}},[n("Input",{staticClass:"input",attrs:{type:"text",placeholder:"邮箱",icon:"ios-email-outline"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),t._v(" "),n("Mytip",{attrs:{content:"密码",info:t.passwordInfo}},[n("Input",{staticClass:"input",attrs:{type:"password",placeholder:"密码",icon:"ios-locked-outline"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t._v(" "),n("Mytip",{attrs:{content:"确认密码",info:t.rePasswordInfo}},[n("Input",{staticClass:"input",attrs:{type:"password",placeholder:"确认密码",icon:"ios-unlocked-outline"},model:{value:t.rePassword,callback:function(e){t.rePassword=e},expression:"rePassword"}})],1),t._v(" "),n("Button",{staticClass:"login-bt",attrs:{type:"primary",long:"",loading:t.loadStatu},on:{click:t.toRegister}},[t._v("注册")]),t._v(" "),n("a",{staticClass:"a-login",attrs:{href:"#"},on:{click:t.toLogin}},[t._v("前往登录")])],1)])},staticRenderFns:[]};var $=n("VU/8")(I,_,!1,function(t){n("hiDf")},"data-v-356dabd2",null).exports,y={data:function(){return{currenTab:"homepage"}},computed:l()({},Object(c.c)({user:function(t){return t.user}})),methods:l()({},Object(c.b)({getInfo:"user/getInfo",exit:"user/exit"}),{tabHandel:function(t){this.currenTab=t,this.$router.push({name:t})},accountHandel:function(t){var e=this;"exit"===t&&this.exit().then(function(){e.$router.push({name:"login"})})}}),mounted:function(){var t=this;this.getInfo().then(function(e){e.state||(t.$Message.error(e.info),t.$router.push({name:"login"}))}).catch(function(e){console.log(e),t.$router.push({name:"login"})})}},C={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap"},[n("div",{staticClass:"mune"},[n("ul",[n("li",{staticClass:"icon",on:{click:function(e){t.tabHandel("homepage")}}},[t._v("简易相册")]),t._v(" "),n("li",{class:{active:"homepage"===t.currenTab},on:{click:function(e){t.tabHandel("homepage")}}},[t._v("首页")]),t._v(" "),n("li",{class:{active:"myupload"===t.currenTab},on:{click:function(e){t.tabHandel("myupload")}}},[t._v("我的上传")])]),t._v(" "),n("ul",[n("li",{staticClass:"email"},[n("Dropdown",{attrs:{trigger:"click"},on:{"on-click":t.accountHandel}},[n("a",{attrs:{href:"javascript:void(0)"}},[t._v("\n              "+t._s(t.user.email)+"\n              "),n("Icon",{attrs:{type:"arrow-down-b"}})],1),t._v(" "),n("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[n("DropdownItem",{attrs:{name:"account"}},[t._v("我的账号")]),t._v(" "),n("DropdownItem",{attrs:{name:"exit"}},[t._v("退出")])],1)],1)],1)])]),t._v(" "),n("router-view")],1)},staticRenderFns:[]};var k=n("VU/8")(y,C,!1,function(t){n("lwd0")},"data-v-2fce3f1b",null).exports,A={data:function(){return{isRemove:!1,showMenu:!1}},computed:{url:function(t){return t.albumInfo.file?m+t.albumInfo.file.url:m+"/album-default.png"}},props:{albumInfo:{type:Object,required:!0}},methods:l()({},Object(c.b)({deleteAlbum:"album/deleteAlbum",setState:"album/setState"}),{showMenuHandel:function(){this.showMenu=!this.showMenu},deleteHandel:function(){var t=this;this.deleteAlbum({albumId:this.albumInfo.albumId}).then(function(e){e.state?(t.isRemove=!0,t.$Message.success(e.info)):t.$Message.error(e.info)}).catch(function(t){console.log(t)})},renameHandel:function(){},openAlbumHendel:function(){var t=this;this.setState({currentAlbumId:this.albumInfo.albumId}).then(function(){t.$router.push({name:"albumpage"})})}})},H={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isRemove?t._e():n("div",{staticClass:"wrap"},[n("img",{attrs:{src:t.url,alt:""},on:{click:t.openAlbumHendel}}),n("br"),t._v(" "),n("span",[t._v(t._s(t.albumInfo.albumName))]),t._v(" "),n("span",[t._v("("+t._s(t.albumInfo.photoNumber)+")")]),t._v(" "),n("Icon",{staticClass:"icon",attrs:{type:"gear-a",size:"20"},on:{click:t.showMenuHandel}}),t._v(" "),n("ul",{directives:[{name:"show",rawName:"v-show",value:t.showMenu,expression:"showMenu"}],staticClass:"menu"},[n("li",{on:{click:t.deleteHandel}},[t._v("删除")])])],1)},staticRenderFns:[]};var S=n("VU/8")(A,H,!1,function(t){n("2Qik")},"data-v-43699243",null).exports,x={data:function(){return{showAddAlbumModel:!1,albumName:""}},computed:l()({},Object(c.c)({albumList:function(t){return t.album.albumList}})),components:{albumItem:S},methods:l()({},Object(c.b)({getAllAlbum:"album/getAllAlbum",addAlbum:"album/addAlbum"}),{addAlbumHandel:function(){this.showAddAlbumModel=!0},ok:function(){var t=this;this.addAlbum({albumName:this.albumName}).then(function(e){e.state?(t.albumName="",t.$Message.success(e.info)):t.$Message.error(e.info)}).catch(function(t){console.log(t)})}}),mounted:function(){var t=this;this.getAllAlbum().then(function(e){e.state||(t.$Message.error(e.info),t.$router.push({name:"login"}))}).catch(function(t){console.log(t)})}},M={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap"},[n("ul",{staticClass:"menu"},[n("li",{on:{click:t.addAlbumHandel}},[n("Icon",{attrs:{type:"ios-folder"}}),t._v(" 新建相册")],1)]),t._v(" "),n("div",{staticClass:"album-wrap"},t._l(t.albumList,function(t){return n("albumItem",{key:t.albumId,attrs:{albumInfo:t}})})),t._v(" "),n("Modal",{attrs:{title:"请输入相册名"},on:{"on-ok":t.ok},model:{value:t.showAddAlbumModel,callback:function(e){t.showAddAlbumModel=e},expression:"showAddAlbumModel"}},[n("Input",{model:{value:t.albumName,callback:function(e){t.albumName=e},expression:"albumName"}})],1)],1)},staticRenderFns:[]};var F=n("VU/8")(x,M,!1,function(t){n("tTKT")},"data-v-22e9fdbc",null).exports,L={data:function(){return{isRemove:!1}},props:{type:{type:String,default:"big"},index:{type:Number,default:0},fileInfo:{type:Object,required:!0}},computed:{imgUrl:function(t){return m+t.fileInfo.url}},methods:l()({},Object(c.b)({deleteFile:"album/deleteFile"}),{overHandel:function(){this.$refs.inputEle.select()},copyHandel:function(){this.$refs.inputEle.select(),document.execCommand("Copy"),this.$Message.success("已复制")},openHandel:function(){window.open(m+this.fileInfo.url)},deleteHandel:function(){var t=this;this.deleteFile({fileId:this.fileInfo.fileId}).then(function(e){e.state?(t.isRemove=!0,t.$Message.success(e.info)):t.$Message.error(e.info)}).catch(function(t){console.log(t)})},showImgHandel:function(){"smail"===this.type&&this.$router.push({name:"showphoto",params:{index:this.index}})}})},N={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isRemove?t._e():n("div",{staticClass:"wrap",class:t.type},[n("div",{staticClass:"img-box",on:{click:t.showImgHandel}},[n("img",{attrs:{src:t.imgUrl,alt:""}})]),t._v(" "),n("div",[n("input",{ref:"inputEle",staticClass:"input",attrs:{type:"text"},domProps:{value:t.imgUrl},on:{mouseover:t.overHandel}}),t._v(" "),"big"===t.type?n("span",[n("Button",{staticClass:"copy-bt",on:{click:t.copyHandel}},[t._v("复制")]),t._v(" "),n("Button",{staticClass:"open-bt",on:{click:t.openHandel}},[t._v("打开")]),t._v(" "),n("Button",{staticClass:"delete-bt",attrs:{icon:"android-delete"},on:{click:t.deleteHandel}})],1):n("span",{staticClass:"smail"},[n("Button",{staticClass:"copy-bt",attrs:{icon:"ios-copy-outline"},on:{click:t.copyHandel}}),t._v(" "),n("Button",{staticClass:"open-bt",attrs:{icon:"ios-redo-outline"},on:{click:t.openHandel}}),t._v(" "),n("Button",{staticClass:"delete-bt",attrs:{icon:"android-delete"},on:{click:t.deleteHandel}})],1)])])},staticRenderFns:[]};var P=n("VU/8")(L,N,!1,function(t){n("YIFD")},"data-v-3f98ffc6",null).exports,E=["截图后粘贴、拖拽图片到这里上传","鼠标松开即开始上传"],O={data:function(){return{tipInfo:E[0],dragState:"dragleave",host:m,selectAlbumId:void 0,showProgress:!1,showVideo:!1,showCanvas:!1,progressNum:0,video:null,videoStream:null}},computed:l()({},Object(c.c)({albumList:function(t){return t.album.albumList},fileList:function(t){return t.album.fileList}})),components:{photoItem:P},methods:l()({},Object(c.b)({getAllAlbum:"album/getAllAlbum",addFiles:"album/addFiles",setState:"album/setState"}),{albumSelectHandel:function(t){this.selectAlbumId=t,this.setState({fileList:[]})},dragenterHandel:function(t){this.dragState="dragenter",this.tipInfo=E[1]},dragleaveHandel:function(t){this.dragState="dragleave",this.tipInfo=E[0]},dragoverHandel:function(t){},dropHandel:function(t){t.preventDefault(),this.dragState="dragleave",this.tipInfo=E[0],this.uploadHandel(t.dataTransfer.files)},pasteHandel:function(){alert("aaa")},uploadFileByInput:function(){var t=this;if(document.getElementById("$$$$$$$$")){var e=document.getElementById("$$$$$$$$");e.parentNode.removeChild(e)}var n=document.createElement("input");n.setAttribute("type","file"),n.setAttribute("multiple","multiple"),n.setAttribute("id","$$$$$$$$"),n.style.display="none",n.style.position="absolute",n.onchange=function(e){n.parentNode.removeChild(n);var a=e.target.files;t.uploadHandel(a)},document.body.appendChild(n),n.click()},uploadFileByVideo:function(){var t=this;this.showVideo=!0;var e=this.$refs.video,n=window.URL||window.webkitURL;navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,navigator.getUserMedia&&navigator.getUserMedia({video:!0},function(a){t.videoStream=a,e.src=n.createObjectURL(a),t.video=e,e.play()},function(t){console.log(t)})},uploadHandel:function(t){var e=this;if(t.length>0){this.showProgress=!0;var n=setInterval(function(){e.progressNum<60?e.progressNum+=10:clearInterval(n)},10),a=new FormData;a.append("albumId",this.selectAlbumId);for(var s=0;s<t.length;s++)-1!==t[s].type.indexOf("image")?a.append("file",t[s]):this.$Message.error("文件: 【"+t[s].name+"】 不是图片文件！");this.addFiles(a).then(function(t){t.state?(e.progressNum=100,e.$Message.success(t.info),setTimeout(function(){e.showProgress=!1},500)):e.$$Message.error(t.info)}).catch(function(t){console.log(t)})}},closeVideo:function(){this.showVideo=!1,this.videoStream.getTracks()[0].stop()},cameraHandel:function(){this.showCanvas=!0;var t=this.$refs.canvas,e=t.getContext("2d"),n=this.video.clientWidth,a=this.video.clientHeight;t.width=n,t.height=a,e.drawImage(this.video,0,0,n,a)},resetVideoHandel:function(){this.showCanvas=!1,this.showVideo=!0},userCameraHandel:function(){var t=this.$refs.canvas.toDataURL("image/png"),e=this.dataURLtoFile(t,"file.jpg");this.uploadHandel([e]),this.showCanvas=!1,this.closeVideo()},dataURLtoFile:function(t,e){for(var n=t.split(","),a=n[0].match(/:(.*?);/)[1],s=atob(n[1]),o=s.length,i=new Uint8Array(o);o--;)i[o]=s.charCodeAt(o);return new File([i],e,{type:a})},parseHandel:function(t){var e=t.clipboardData,n=void 0,a=void 0,s=void 0;if(e){if(!(n=e.items))return;a=n[0],s=e.types||[];for(var o=0;o<s.length;o++)if("Files"===s[o]){a=n[o];break}a&&"file"===a.kind&&a.type.match(/^image\//i)&&this.uploadHandel([a.getAsFile()])}}}),mounted:function(){var t=this;this.setState({fileList:[]}),this.getAllAlbum().then(function(e){e.state?t.selectAlbumId=t.albumList[0].albumId:(t.$Message.error(e.info),t.$router.push({name:"login"}))}).catch(function(t){console.log(t)})},destroyed:function(){document.removeEventListener("paste",this.parseHandel)},created:function(){var t=this;this.$nextTick(function(){document.addEventListener("paste",t.parseHandel)})}},R={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap"},[n("div",{ref:"uploadBox",staticClass:"upload-box",class:{dragenter:"dragenter"===t.dragState},on:{dragenter:function(e){return e.preventDefault(),t.dragenterHandel(e)},dragleave:function(e){return e.preventDefault(),t.dragleaveHandel(e)},dragover:function(e){return e.preventDefault(),t.dragoverHandel(e)},drop:function(e){return e.preventDefault(),t.dropHandel(e)},paste:t.pasteHandel}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showVideo,expression:"showVideo"}],staticClass:"video-box"},[n("Button",{staticClass:"camera-bt",attrs:{size:"large",shape:"circle",icon:"ios-camera-outline"},on:{click:t.cameraHandel}}),t._v(" "),n("Icon",{staticClass:"close-bt",attrs:{type:"close-round",size:"20"},on:{click:t.closeVideo}}),t._v(" "),n("video",{ref:"video"})],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showCanvas,expression:"showCanvas"}],staticClass:"canvas-box"},[n("canvas",{ref:"canvas"}),t._v(" "),n("Button",{staticClass:"user-bt",attrs:{type:"success"},on:{click:t.userCameraHandel}},[t._v("使用")]),t._v(" "),n("Button",{staticClass:"reset-bt",attrs:{type:"success"},on:{click:t.resetVideoHandel}},[t._v("重拍")])],1),t._v(" "),n("div",{staticClass:"album-select"},[n("span",[t._v("上传到相册：")]),t._v(" "),n("Select",{staticStyle:{width:"200px"},on:{"on-change":t.albumSelectHandel},model:{value:t.selectAlbumId,callback:function(e){t.selectAlbumId=e},expression:"selectAlbumId"}},t._l(t.albumList,function(e){return n("Option",{key:e.albumId,attrs:{value:e.albumId}},[t._v(t._s(e.albumName))])}))],1),t._v(" "),n("p",{staticClass:"info-1"},[t._v(t._s(t.tipInfo))]),t._v(" "),n("p",{staticClass:"info-2"},[t._v("或者")]),t._v(" "),n("Button",{staticClass:"button",attrs:{type:"success"},on:{click:t.uploadFileByInput}},[t._v("选择文件")]),t._v(" "),n("Button",{staticClass:"button",attrs:{type:"success"},on:{click:t.uploadFileByVideo}},[t._v("直接拍照")]),t._v(" "),n("Progress",{directives:[{name:"show",rawName:"v-show",value:t.showProgress,expression:"showProgress"}],staticClass:"progress",attrs:{percent:t.progressNum}})],1),t._v(" "),n("br"),t._v(" "),n("ul",{staticClass:"upload-file-warp"},t._l(t.fileList,function(t){return n("li",{key:t.fileId},[n("photo-item",{attrs:{fileInfo:t}})],1)}))])},staticRenderFns:[]};var B=n("VU/8")(O,R,!1,function(t){n("/mlJ")},"data-v-b02b34fe",null).exports,U={data:function(){return{}},computed:l()({},Object(c.c)({fileList:function(t){return t.album.fileList},currentAlbumId:function(t){return t.album.currentAlbumId}})),components:{photoItem:P},methods:l()({},Object(c.b)({getAllFile:"album/getAllFile",addFiles:"album/addFiles",setState:"album/setState"}),{goBackHandel:function(){this.$router.push({name:"myupload"})},uploadFileByInput:function(){var t=this;if(document.getElementById("$$$$$$$$")){var e=document.getElementById("$$$$$$$$");e.parentNode.removeChild(e)}var n=document.createElement("input");n.setAttribute("type","file"),n.setAttribute("multiple","multiple"),n.setAttribute("id","$$$$$$$$"),n.style.display="none",n.style.position="absolute",n.onchange=function(e){n.parentNode.removeChild(n);var a=e.target.files;t.uploadHandel(a)},document.body.appendChild(n),n.click()},uploadHandel:function(t){var e=this;if(t.length>0){this.showProgress=!0;var n=setInterval(function(){e.progressNum<60?e.progressNum+=10:clearInterval(n)},10),a=new FormData;a.append("albumId",this.currentAlbumId);for(var s=0;s<t.length;s++)-1!==t[s].type.indexOf("image")?a.append("file",t[s]):this.$Message.error("文件: 【"+t[s].name+"】 不是图片文件！");this.addFiles(a).then(function(t){t.state?(e.progressNum=100,e.$Message.success(t.info),setTimeout(function(){e.showProgress=!1},500)):e.$$Message.error(t.info)}).catch(function(t){console.log(t)})}}}),mounted:function(){var t=this;"showphoto"!==this.$route.params.from&&(this.setState({fileList:[]}),this.getAllFile({albumId:this.currentAlbumId}).then(function(e){e.state||(t.$Message.error(e.info),t.$router.push({name:"login"}))}).catch(function(e){console.log(e),t.$router.push({name:"myupload"})}))}},T={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap"},[n("ul",{staticClass:"menu"},[n("li",{on:{click:t.goBackHandel}},[n("Icon",{attrs:{type:"chevron-left"}}),t._v(" 返回")],1),t._v(" "),n("li",{on:{click:t.uploadFileByInput}},[n("Icon",{attrs:{type:"android-upload"}}),t._v(" 上传")],1)]),t._v(" "),n("div",{staticClass:"photo-wrap"},t._l(t.fileList,function(t,e){return n("photo-item",{key:t.fileId,staticClass:"photo-item",attrs:{type:"smail",index:e,url:t.url,fileInfo:t}})}))])},staticRenderFns:[]};var V=n("VU/8")(U,T,!1,function(t){n("1P60")},"data-v-1c86b3b6",null).exports,j={data:function(){return{index:0}},computed:l()({},Object(c.c)({fileList:function(t){return t.album.fileList}}),{file:function(t){if(t.fileList[t.index])return t.fileList[t.index]},url:function(t){return t.file?m+t.file.url:""}}),methods:{closeHandel:function(){this.$router.push({name:"albumpage",params:{from:"showphoto"}})},leftHandel:function(){this.index>0&&(this.index=this.index-1)},rightHandel:function(){this.index<this.fileList.length-1&&(this.index=this.index+1)},downloadHandel:function(){if(document.getElementById("aaaaaa")){var t=document.getElementById("aaaaaa");t.parentNode.removeChild(t)}var e=document.createElement("a");e.setAttribute("download",this.file.fileName),e.setAttribute("href",this.url),e.setAttribute("id","aaaaaa"),e.style.display="none",e.style.position="absolute",e.onclick=function(t){e.parentNode.removeChild(e)},document.body.appendChild(e),e.click()}},mounted:function(){this.index=this.$route.params.index,0===this.fileList.length&&this.$router.push({name:"albumpage",params:{from:"showphoto"}})}},D={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap1"},[n("img",{staticClass:"img-item",attrs:{src:t.url,alt:""}}),t._v(" "),n("span",{staticClass:"tip"},[t._v(t._s(t.index+1)+" / "+t._s(t.fileList.length))]),t._v(" "),n("Icon",{staticClass:"close-bt",attrs:{type:"close-round",size:"20"},on:{click:t.closeHandel}}),t._v(" "),n("Icon",{staticClass:"download-bt",attrs:{type:"android-download",size:"25"},on:{click:t.downloadHandel}}),t._v(" "),n("Icon",{staticClass:"left-bt",attrs:{type:"arrow-left-c",size:"30"},on:{click:t.leftHandel}}),t._v(" "),n("Icon",{staticClass:"right-bt",attrs:{type:"arrow-right-c",size:"30"},on:{click:t.rightHandel}})],1)},staticRenderFns:[]};var z=n("VU/8")(j,D,!1,function(t){n("emC9")},"data-v-013d4f09",null).exports;a.default.use(i.a);var Z=new i.a({routes:[{path:"/",name:"login",component:w},{path:"/register",name:"register",component:$},{path:"/home",name:"home",component:k,children:[{path:"/homepage",name:"homepage",component:B},{path:"/myupload",name:"myupload",component:F},{path:"/albumpage",name:"albumpage",component:V},{path:"/showphoto",name:"showphoto",component:z}]}]}),q=n("woOf"),G=n.n(q),J=n("//Fk"),K=n.n(J),Q={namespaced:!0,state:{userName:"",email:"",userId:void 0},actions:{login:function(t,e){var n=t.commit;t.dispatch,t.getters,t.state;return new K.a(function(t,a){h({method:"POST",url:"user/login",data:e}).then(function(e){"1"===e.data.state.toString()?(n("setInfo",e.data.data),t({state:!0,info:e.data.stateInfo})):t({state:!1,info:e.data.stateInfo})}).catch(function(t){a(t)})})},register:function(t,e){var n=t.commit;t.dispatch,t.getters,t.state;return new K.a(function(t,a){h({method:"POST",url:"user/register",data:e}).then(function(e){"1"===e.data.state.toString()?(n("setInfo",e.data.data),t({state:!0,info:e.data.stateInfo})):t({state:!1,info:e.data.stateInfo})}).catch(function(t){a(t)})})},getInfo:function(t){var e=t.commit;t.dispatch,t.getters,t.state;return new K.a(function(t,n){h({method:"GET",url:"user/info"}).then(function(n){"1"===n.data.state.toString()?(e("setInfo",n.data.data),t({state:!0,info:n.data.stateInfo})):t({state:!1,info:n.data.stateInfo})}).catch(function(t){n(t)})})},exit:function(t){var e=t.commit;t.dispatch,t.getters,t.state;return new K.a(function(t,n){h({method:"GET",url:"user/exit"}).then(function(n){"1"===n.data.state.toString()?(e("setInfo",n.data.data),t({state:!0,info:n.data.stateInfo})):t({state:!1,info:n.data.stateInfo})}).catch(function(t){n(t)})})}},mutations:{setInfo:function(t,e){G()(t,e)}}},W={namespaced:!0,state:{currentAlbumId:void 0,albumList:[],fileList:[]},actions:{addAlbum:function(t,e){var n=t.commit,a=(t.dispatch,t.getters,t.state);return new K.a(function(t,s){h({method:"POST",url:"album/add",data:e}).then(function(e){if("1"===e.data.state.toString()){var s=[].concat(a.albumList,e.data.data);n("setInfo",{albumList:s}),t({state:!0,info:e.data.stateInfo})}else t({state:!1,info:e.data.stateInfo})}).catch(function(t){s(t)})})},getAllAlbum:function(t){var e=t.commit;t.dispatch,t.getters,t.state;return new K.a(function(t,n){h({method:"GET",url:"album/all"}).then(function(n){"1"===n.data.state.toString()?(e("setInfo",{albumList:n.data.data}),t({state:!0,info:n.data.stateInfo})):t({state:!1,info:n.data.stateInfo})}).catch(function(t){n(t)})})},deleteAlbum:function(t,e){t.commit,t.dispatch,t.getters,t.state;return new K.a(function(t,n){h({method:"POST",url:"album/delete",data:e}).then(function(e){"1"===e.data.state.toString()?t({state:!0,info:e.data.stateInfo}):t({state:!1,info:e.data.stateInfo})}).catch(function(t){n(t)})})},getAllFile:function(t,e){var n=t.commit;t.dispatch,t.getters,t.state;return new K.a(function(t,a){h({method:"POST",url:"file/all",data:e}).then(function(e){"1"===e.data.state.toString()?(n("setInfo",{fileList:e.data.data}),t({state:!0,info:e.data.stateInfo})):t({state:!1,info:e.data.stateInfo})}).catch(function(t){a(t)})})},addFiles:function(t,e){var n=t.commit,a=(t.dispatch,t.getters,t.state);return new K.a(function(t,s){h({method:"POST",url:"file/upload",data:e}).then(function(e){if("1"===e.data.state.toString()){var s=e.data.data.concat(a.fileList);n("setInfo",{fileList:s}),t({state:!0,info:e.data.stateInfo})}else t({state:!1,info:e.data.stateInfo})}).catch(function(t){s(t)})})},deleteFile:function(t,e){t.commit,t.dispatch,t.getters,t.state;return new K.a(function(t,n){h({method:"POST",url:"file/delete",data:e}).then(function(e){"1"===e.data.state.toString()?t({state:!0,info:e.data.stateInfo}):t({state:!1,info:e.data.stateInfo})}).catch(function(t){n(t)})})},setState:function(t,e){var n=t.commit;t.dispatch,t.getters,t.state;return new K.a(function(t,a){n("setInfo",e),t()})}},mutations:{setInfo:function(t,e){G()(t,e)}}};a.default.use(c.a);var X=new c.a.Store({modules:{user:Q,album:W}}),Y=n("kxXK"),tt=n.n(Y);n("vOPF");a.default.use(tt.a),a.default.config.productionTip=!1,new a.default({el:"#app",router:Z,store:X,components:{App:o},template:"<App/>"})},YIFD:function(t,e){},emC9:function(t,e){},hiDf:function(t,e){},lwd0:function(t,e){},mkpF:function(t,e){},mttZ:function(t,e){},qOae:function(t,e){},tTKT:function(t,e){},vOPF:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.87c8a03b6c92dc3b028d.js.map